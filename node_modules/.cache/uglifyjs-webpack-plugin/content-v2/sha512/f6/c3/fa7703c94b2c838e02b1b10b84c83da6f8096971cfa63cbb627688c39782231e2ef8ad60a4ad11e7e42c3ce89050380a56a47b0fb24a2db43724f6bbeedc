{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{190:function(t,s,n){\"use strict\";n.r(s);var a=n(0),e=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"div\",{staticClass:\"content\"},[n(\"h1\",{attrs:{id:\"搭建linux应用\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#搭建linux应用\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 搭建Linux应用\")]),t._v(\" \"),n(\"p\",[t._v(\"工具：\"),n(\"code\",[t._v(\"yum\")]),t._v(\" \"),n(\"code\",[t._v(\"docker\")]),n(\"br\"),t._v(\"\\n服务端：\"),n(\"code\",[t._v(\"swoft\")]),n(\"br\"),t._v(\"\\n应用端：\"),n(\"code\",[t._v(\"yii2.0\")])]),t._v(\" \"),n(\"h2\",{attrs:{id:\"安装基础组件\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装基础组件\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 安装基础组件\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"\\nyum update\\n\\nyum -y \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"install\")]),t._v(\" lrzsz   \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 安装rz/sz命令\")]),t._v(\"\\n\\nyum -y \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"install\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"git\")]),t._v(\"  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 安装git\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 安装 composer\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"curl\")]),t._v(\" -sS https://getcomposer.org/installer \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"|\")]),t._v(\" php   \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 下载 composer.phar 文件（注意要关闭翻墙）\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"mv\")]),t._v(\" composer.phar /usr/local/bin/composer   \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 设置为全局可访问\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如果报错以下问题\")]),t._v(\"\\n/usr/bin/env: php: No such \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"file\")]),t._v(\" or directory\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 执行下面命令\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"ln\")]),t._v(\" -s /home/php/bin/php /usr/local/bin/php   \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 将php的实际安装目录指向/usr/local/bin/php\")]),t._v(\"\\n\\ncomposer -v    \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看composer版本，确定是否安装成功\")]),t._v(\"\\n\\ncomposer selfupdate   \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 升级composer\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 更换composer镜像源:\")]),t._v(\"\\ncomposer config -g repo.packagist composer https://packagist.laravel-china.org\\n\\n\")])])]),n(\"h2\",{attrs:{id:\"安装php7\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装php7\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 安装php7\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如果之前已经安装我们先卸载一下\")]),t._v(\"\\nyum -y remove php*\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 更改yum源\")]),t._v(\"\\nrpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm \\nrpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 安装php72w和各种拓展\")]),t._v(\"\\nyum -y \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"install\")]),t._v(\" php72w php72w-cli php72w-common php72w-devel php72w-embedded php72w-fpm php72w-gd php72w-mbstring php72w-mysqlnd php72w-opcache php72w-pdo php72w-xml\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看当前php版本\")]),t._v(\"\\nphp -v\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 开启php-fpm\")]),t._v(\"\\nsystemctl start php-fpm\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 关闭php-fpm\")]),t._v(\"\\nsystemctl stop php-fpm\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 重启php-fpm\")]),t._v(\"\\nsystemctl restart php-fpm\\n\\n\")])])]),n(\"h2\",{attrs:{id:\"安装nginx\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装nginx\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 安装nginx\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 添加yum源\")]),t._v(\"\\nrpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\\n\\nyum \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"install\")]),t._v(\" -y nginx\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 启动Nginx并设置开机自动运行\")]),t._v(\"\\nsystemctl start nginx.service\\nsystemctl \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"enable\")]),t._v(\" nginx.service\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 开启nginx\")]),t._v(\"\\nsystemctl start nginx\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 关闭nginx\")]),t._v(\"\\nsystemctl stop nginx\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 重启nginx\")]),t._v(\"\\nsystemctl restart nginx\\n\\n\")])])]),n(\"h2\",{attrs:{id:\"安装mysql\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装mysql\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 安装mysql\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 添加yum源\")]),t._v(\"\\nrpm -Uvh http://dev.mysql.com/get/mysql57-community-release-el7-7.noarch.rpm\\n\\nyum \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"install\")]),t._v(\" mysql-community-server\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 启动mysql服务\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"service\")]),t._v(\" mysqld start\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 第一次启动后，mysql5.7会生成一个随机root密码，并放到了/var/log/mysqld.log日志中\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 使用 grep 'temporary password'  /var/log/mysqld.log 这个命令读取root初始密码\")]),t._v(\"\\n2018-11-26T15:08:41.595259Z 1 \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"Note\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" A temporary password is generated \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" root@localhost: owMP7Z\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"obmB-\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 初始密码为 owMP7Z(obmB-\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 使用 mysql -u root -p 然后输入上面的密码进入\")]),t._v(\"\\nALTER USER USER\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" IDENTIFIED BY \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'123456'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 修改登录的用户密码改成123456\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# mysql5.7默认对密码进行强校验，建议设置为一个较为复杂的密码，否则会报错\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# mysql5.7密码校验\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 0 or LOW\\tLength\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 1 or MEDIUM\\tLength; numeric, lowercase/uppercase, and special characters\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 2 or STRONG\\tLength; numeric, lowercase/uppercase, and special characters; dictionary file\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# (默认validate_password_policy = 1)\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如果需要把密码设置的简单一些，执行以下命令：\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"set\")]),t._v(\" global validate_password_policy\"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"0\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 设置简单的密码：\")]),t._v(\"\\nALTER USER USER\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" IDENTIFIED BY \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'12345678'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 默认需要密码长度为8位\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如需再次进入mysql, 重新设置密码\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 切换到mysql数据表\")]),t._v(\"\\nuse mysql\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 修改密码\")]),t._v(\"\\nupdate mysql.user \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"set\")]),t._v(\" authentication_string\"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"PASSWORD\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'12345678'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" where user\"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'root'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 修改密码后，需要重新启动mysql，新密码才会生效\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 重启mysql服务\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"service\")]),t._v(\" mysqld stop\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"service\")]),t._v(\" mysqld start\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 设置外网可访问\")]),t._v(\"\\nuse mysql\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\nupdate user \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"set\")]),t._v(\" host \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'%'\")]),t._v(\" where user \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'root'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" \\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"select\")]),t._v(\" host,user from user\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" \\nflush privileges\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\")])])]),n(\"h2\",{attrs:{id:\"安装docker\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装docker\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 安装docker\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 移除旧的版本：\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-selinux docker-engine-selinux docker-engine\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 安装一些必要的系统工具：\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" yum \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"install\")]),t._v(\" -y yum-utils device-mapper-persistent-data lvm2\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 添加软件源信息：\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 更新 yum 缓存：\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" yum makecache fast\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 安装 Docker-ce：\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" yum -y \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"install\")]),t._v(\" docker-ce\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 启动 Docker 后台服务\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" systemctl start docker\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 镜像加速\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"vi\")]),t._v(\" /etc/docker/daemon.json     \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如没有该文件，请先新建一个\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 新建daemon.json文件\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"###############################################################\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"cd\")]),t._v(\" /etc/docker/\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"touch\")]),t._v(\" daemon.json\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"###############################################################\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 文件内容\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"###############################################################\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"registry-mirrors\"')]),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"http://hub-mirror.c.163.com\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"###############################################################\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如需删除Docker CE，执行以下命令\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" yum remove docker-ce\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"rm\")]),t._v(\" -rf /var/lib/docker\\n\\n\")])])]),n(\"h2\",{attrs:{id:\"安装swoft\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装swoft\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 安装swoft\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"\\ndocker pull swoft/swoft\\n\\ndocker run -p 8080:80 --name swoft  --rm -d swoft/swoft:latest\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 拷贝容器文件到本地\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"cd\")]),t._v(\" /home/\\ndocker \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"cp\")]),t._v(\" swoft:/var/www/swoft \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\".\")]),t._v(\"  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 注意点号，表示拷贝到当前目录\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 从本地文件运行swoft容器：\")]),t._v(\"\\ndocker run -p 8080:80 --name swoft -v /home/swoft/:/var/www/swoft --rm -d swoft/swoft:latest\\n\\ndocker run -p 8080:80 --name swoft -v /home/WancllMS-Server/swoft/:/var/www/swoft --rm -d swoft/swoft:latest\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看运行的容器\")]),t._v(\"\\ndocker \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"ps\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 停止容器\")]),t._v(\"\\ndocker stop swoft\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 重启容器\")]),t._v(\"\\ndocker restart swoft\\n\\n\")])])]),n(\"h2\",{attrs:{id:\"配置nginx虚拟机\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#配置nginx虚拟机\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 配置nginx虚拟机\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 配置Http\")]),t._v(\"\\n\\nserver \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    listen 80\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    server_name www.demo.com\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    root   /home/demo/yii/web/\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    location / \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        index index.html index.htm index.php\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        autoindex off\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n        \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"!\")]),t._v(\"-e \"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$request_filename\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            rewrite  ^\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$  /index.php?s\"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"/\"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$1\")]),t._v(\"  last\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    location ~ \\\\.php\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$ \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        fastcgi_pass 127.0.0.1:9000\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_index index.php\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_split_path_info ^\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"((\")]),t._v(\"?U\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\".+\\\\.php\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"/?.+\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param SCRIPT_FILENAME \"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_script_name\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param PATH_INFO \"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param PATH_TRANSLATED \"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        include  fastcgi_params\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"#############################分割线##################################\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 配置Https\")]),t._v(\"\\n\\nserver \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    listen 80\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    server_name www.demo.com\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" 301 https://\"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$server_name\")]),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$request_uri\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" \\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\nserver \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    listen 443\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    server_name www.demo.com\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    root   /home/demo/yii/web/\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    ssl on\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    ssl_certificate  /etc/nginx/ssl/1_www.demo.com_bundle.crt\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    ssl_certificate_key  /etc/nginx/ssl/2_www.demo.com.key\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    location / \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        index index.html index.htm index.php\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        autoindex off\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n        \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"!\")]),t._v(\"-e \"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$request_filename\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            rewrite  ^\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$  /index.php?s\"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"/\"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$1\")]),t._v(\"  last\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    location ~ \\\\.php\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$ \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        fastcgi_pass 127.0.0.1:9000\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_index index.php\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_split_path_info ^\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"((\")]),t._v(\"?U\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\".+\\\\.php\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"/?.+\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param SCRIPT_FILENAME \"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_script_name\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param PATH_INFO \"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param PATH_TRANSLATED \"),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),n(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        include  fastcgi_params\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\")])])]),n(\"h2\",{attrs:{id:\"设置文件权限\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#设置文件权限\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 设置文件权限\")]),t._v(\" \"),n(\"div\",{staticClass:\"language-bash extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[n(\"code\",[t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 修改文件上传权限\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"cd\")]),t._v(\" /home/demo/yii/web/\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"chmod\")]),t._v(\" 757 uploads\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 修改缓存文件权限\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"cd\")]),t._v(\" /home/demo/yii/runtime/\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"chmod\")]),t._v(\" 757 cache\\n\\n\")])])])])}],!1,null,null,null);e.options.__file=\"demo2.md\";s.default=e.exports}}]);","extractedComments":[]}