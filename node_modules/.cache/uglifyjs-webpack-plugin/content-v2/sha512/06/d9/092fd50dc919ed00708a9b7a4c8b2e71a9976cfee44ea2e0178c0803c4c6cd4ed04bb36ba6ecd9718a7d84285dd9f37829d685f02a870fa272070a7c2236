{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{198:function(t,n,s){\"use strict\";s.r(n);var a=s(0),o=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,n=t.$createElement,s=t._self._c||n;return s(\"div\",{staticClass:\"content\"},[s(\"h1\",{attrs:{id:\"docker搭建应用\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker搭建应用\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Docker搭建应用\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"centos-docker-安装\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#centos-docker-安装\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" CentOS Docker 安装\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"docker支持以下的centos版本：\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker支持以下的centos版本：\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Docker支持以下的CentOS版本：\")]),t._v(\" \"),s(\"p\",[t._v(\"CentOS 7 (64-bit)\"),s(\"br\"),t._v(\"\\nCentOS 6.5 (64-bit) 或更高的版本\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"前提条件\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#前提条件\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 前提条件\")]),t._v(\" \"),s(\"p\",[t._v(\"目前，CentOS 仅发行版本中的内核支持 Docker。\"),s(\"br\"),t._v(\"\\n在CentOS 7 上，要求系统64位、内核版本为 3.10 以上。\"),s(\"br\"),t._v(\"\\n在CentOS-6.5 或更高的版本的 CentOS 上，要求系统为64位、内核版本为 2.6.32-431 或者更高版本。\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 验证CentOS 版本是否支持 Docker\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"uname\")]),t._v(\" -r    \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看内核版本\")]),t._v(\"\\n\")])])]),s(\"h3\",{attrs:{id:\"安装docker\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装docker\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 安装Docker\")]),t._v(\" \"),s(\"p\",[t._v(\"从 2017 年 3 月开始 docker 在原来的基础上分为两个分支版本: \"),s(\"code\",[t._v(\"Docker CE\")]),t._v(\" 和 \"),s(\"code\",[t._v(\"Docker EE\")]),t._v(\"。\"),s(\"br\"),t._v(\"\\nDocker CE 即社区免费版，Docker EE 即企业版，强调安全，但需付费使用。\"),s(\"br\"),t._v(\"\\n本文介绍 Docker CE 的安装使用。\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 使用 sudo 或 root 权限登录 Centos\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" yum update    \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 确保yum包更新到最新\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 执行 Docker 安装脚本\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"curl\")]),t._v(\" -fsSL https://get.docker.com -o get-docker.sh\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" sh get-docker.sh\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 启动Docker进程\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" systemctl start docker\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 验证docker是否安装成功并在容器中执行一个测试的镜像\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" docker run hello-world\\ndocker images\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 镜像加速\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"vi\")]),t._v(\" /etc/docker/daemon.json     \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如没有该文件，请先新建一个\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 新建daemon.json文件\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"###############################################################\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"cd\")]),t._v(\" /etc/docker/\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"touch\")]),t._v(\" daemon.json\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"###############################################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 文件内容\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"###############################################################\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),s(\"span\",{attrs:{class:\"token string\"}},[t._v('\"registry-mirrors\"')]),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{attrs:{class:\"token string\"}},[t._v('\"http://hub-mirror.c.163.com\"')]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"###############################################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 删除Docker CE\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" yum remove docker-ce\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"sudo\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"rm\")]),t._v(\" -rf /var/lib/docker\\n\\n\")])])]),s(\"h3\",{attrs:{id:\"docker-使用\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker-使用\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Docker 使用\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## Docker Hello World ##\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# Docker 允许你在容器内运行应用程序， 使用 docker run 命令来在容器内运行一个应用程序，输出Hello world\")]),t._v(\"\\ndocker run ubuntu:15.10 /bin/echo \"),s(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Hello world\"')]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 各个参数解析：\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# docker: Docker 的二进制执行文件。\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# run:与前面的 docker 组合来运行一个容器。\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# ubuntu:15.10指定要运行的镜像，Docker首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像。\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v('# /bin/echo \"Hello world\": 在启动的容器里执行的命令')]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v('# 以上命令完整的意思为：Docker 以 ubuntu15.10 镜像创建一个新容器，然后在容器里执行 bin/echo \"Hello world\"，然后输出结果。')]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 运行交互式的容器 ##\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v('# 通过docker的两个参数 -i -t，让docker运行的容器实现\"对话\"的能力')]),t._v(\"\\ndocker run -i -t ubuntu:15.10 /bin/bash\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 各个参数解析：\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# -t:在新容器内指定一个伪终端或终端\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# -i:允许你对容器内的标准输入 (STDIN) 进行交互\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 此时我们已进入一个 ubuntu15.10系统的容器\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"cat\")]),t._v(\" /proc/version  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看当前系统的版本信息\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"ls\")]),t._v(\"                 \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 当前目录下的文件列表\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 运行exit命令或者使用CTRL+D来退出容器。\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线#####################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 启动容器（后台模式） ##\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 创建一个以进程方式运行的容器\")]),t._v(\"\\ndocker run -d ubuntu:15.10 /bin/sh -c \"),s(\"span\",{attrs:{class:\"token string\"}},[t._v('\"while true; do echo hello world; sleep 1; done\"')]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 返回的一段字符串，为容器ID，可以通过容器ID来查看对应的容器发生了什么。\")]),t._v(\"\\n\\ndocker \"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"ps\")]),t._v(\"     \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看运行容器\")]),t._v(\"\\n\\ndocker logs \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看容器日志信息\")]),t._v(\"\\n\\ndocker stop \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 停止容器\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线#####################################\")]),t._v(\"\\n\\n\")])])]),s(\"h4\",{attrs:{id:\"docker容器使用\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker容器使用\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Docker容器使用\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 运行一个web应用 ##\")]),t._v(\"\\n\\ndocker pull training/webapp    \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 载入镜像\")]),t._v(\"\\n\\ndocker run -d -P training/webapp python app.py\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 参数说明:\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# -d:让容器在后台运行\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# -P:将容器内部使用的网络端口映射到我们使用的主机上\")]),t._v(\"\\n\\ndocker \"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"ps\")]),t._v(\"   \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看运行容器\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 此时，可以看到端口信息\")]),t._v(\"\\nPORTS\\n0.0.0.0:32769-\"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\"5000/tcp\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# Docker 开放了 5000 端口（默认 Python Flask 端口）映射到主机端口 32769 上\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 通过浏览器访问WEB应用\")]),t._v(\"\\n192.168.217.10:32769\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 也可以通过 -p 参数来设置不一样的端口：\")]),t._v(\"\\ndocker run -d -p 5000:5000 training/webapp python app.py\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 容器内部的 5000 端口映射到我们本地主机的 5000 端口上。\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 网络端口的快捷方式 ##\")]),t._v(\"\\ndocker port \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看容器端口的映射情况\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 查看 WEB 应用程序日志 ##\")]),t._v(\"\\ndocker logs \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看容器内部的标准输出\")]),t._v(\"\\n\\ndocker logs -f \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"   \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 让 docker logs 像使用 tail -f 一样来输出容器内部的标准输出。\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 查看WEB应用程序容器的进程 ##\")]),t._v(\"\\ndocker \"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"top\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看容器内部运行的进程\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 检查 WEB 应用程序 ##\")]),t._v(\"\\ndocker inspect \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看 Docker 的底层信息\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 返回一个 JSON 文件记录着 Docker 容器的配置和状态信息\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 停止 WEB 应用容器 ##\")]),t._v(\"\\ndocker stop \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 停止容器\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 重启WEB应用容器 ##\")]),t._v(\"\\ndocker start \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 已经停止的容器，使用 docker start 来启动\")]),t._v(\"\\n\\ndocker \"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"ps\")]),t._v(\" -l        \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查询最后一次创建的容器  \")]),t._v(\"\\n\\ndocker restart \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 正在运行的容器，使用 docker restart 来重启\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 移除WEB应用容器 ##\")]),t._v(\"\\ndocker \"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"rm\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"容器ID 或 容器名称\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 删除不需要的容器\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 删除容器时，容器必须是停止状态，否则会报错\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\")])])]),s(\"h4\",{attrs:{id:\"docker-镜像使用\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker-镜像使用\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Docker 镜像使用\")]),t._v(\" \"),s(\"p\",[t._v(\"当运行容器时，使用的镜像如果在本地中不存在，docker 就会自动从 docker 镜像仓库中下载；\"),s(\"br\"),t._v(\"\\n默认是从 Docker Hub 公共镜像源下载。\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 列出镜像列表 ##\")]),t._v(\"\\n\\ndocker images     \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 列出本地主机上的镜像\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 各个选项说明:\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# REPOSITORY：表示镜像的仓库源\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# TAG：镜像的标签\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# IMAGE ID：镜像ID\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# CREATED：镜像创建时间\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# SIZE：镜像大小\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如ubuntu仓库源里，有15.10、14.04等多个不同的版本，可以使用 REPOSITORY:TAG 来定义不同的镜像。\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 使用版本为15.10的ubuntu系统镜像来运行容器：\")]),t._v(\"\\ndocker run -t -i ubuntu:15.10 /bin/bash \\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 使用版本为14.04的ubuntu系统镜像来运行容器：\")]),t._v(\"\\ndocker run -t -i ubuntu:14.04 /bin/bash\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如果不指定一个镜像的版本标签，默认使用latest镜像\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 获取一个新的镜像 ##\")]),t._v(\"\\ndocker pull \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"镜像名称:镜像标签\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 获取新镜像\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 查找镜像 ##\")]),t._v(\"\\ndocker search \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"待查找内容\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"  \"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查找镜像\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# NAME:镜像仓库源的名称\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# DESCRIPTION:镜像的描述\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# OFFICIAL:是否docker官方发布\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查找地址：https://hub.docker.com/\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"## 创建镜像 ##\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 当从docker镜像仓库中下载的镜像不能满足需求时，可以通过以下两种方式对镜像进行更改：\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 1.从已经创建的容器中更新镜像，并且提交这个镜像\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 2.使用 Dockerfile 指令来创建一个新的镜像\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\")])])]),s(\"h2\",{attrs:{id:\"搭建php7和nginx运行环境\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#搭建php7和nginx运行环境\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 搭建php7和nginx运行环境\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 下载相关镜像\")]),t._v(\"\\ndocker pull nginx\\ndocker pull php:7.2.12-fpm\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 建立相关目录\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"mkdir\")]),t._v(\" -p /home/www\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"mkdir\")]),t._v(\" -p /home/nginx/conf.d\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 编辑default.conf\")]),t._v(\"\\nvim /home/nginx/conf.d/default.conf\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################文件内容开始分割线###################################\")]),t._v(\"\\nserver \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  listen  80 default_server\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  server_name _\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  root   /usr/share/nginx/html\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n \\n  location / \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n   index index.html index.htm index.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   autoindex off\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n  location ~ \\\\.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$ \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n   root   /var/www/html/\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   fastcgi_pass 172.17.0.2:9000\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   fastcgi_index index.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   fastcgi_split_path_info ^\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"((\")]),t._v(\"?U\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\".+\\\\.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"/?.+\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   fastcgi_param SCRIPT_FILENAME \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_script_name\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   fastcgi_param PATH_INFO \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   fastcgi_param PATH_TRANSLATED \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n   include  fastcgi_params\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n  \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################文件内容结束分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 启动php环境\")]),t._v(\"\\ndocker run -p 9000:9000 --name php -v /home/www/:/var/www/html/ --privileged\"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"true --rm -d php:7.2.12-fpm\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看php镜像的ip地址\")]),t._v(\"\\ndocker inspect --format\"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),s(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'{{.NetworkSettings.IPAddress}}'\")]),t._v(\" php\\n172.17.0.2\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 修改default.conf配置文件，使fastcgi_pass的值为172.17.0.2:9000\")]),t._v(\"\\nvim /home/nginx/conf.d/default.conf\\nfastcgi_pass 172.17.0.2:9000\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 启动nginx镜像\")]),t._v(\"\\ndocker run -p 80:80 --name nginx -v /home/www:/usr/share/nginx/html -v /home/nginx/conf.d:/etc/nginx/conf.d --privileged\"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"true --rm -d nginx\\n\\ndocker run -p 80:80 -p 443:443 --name nginxlog \\\\\\n-v /usr/java/docker/nginxlog/log/:/var/log/nginx:rw \\\\\\n-v /usr/java/docker/nginxlog/conf.d/:/etc/nginx/conf.d:rw \\\\\\n-v /etc/letsencrypt:/etc/letsencrypt:rw \\\\\\n-d nginx\\n\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 查看镜像运行状态\")]),t._v(\"\\ndocker \"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"ps\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 生成php测试文件info.php\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"echo\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token string\"}},[t._v('\"<?php phpinfo();\"')]),t._v(\" \"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\" /home/www/info.php\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 浏览器访问 http://localhost/info.php 验证\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# nginx虚拟机配置\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 以配置www.demo.com虚拟机为例,项目目录地址为/home/www/demo\")]),t._v(\"\\nvim /home/nginx/conf.d/demo.conf\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################文件内容开始分割线###################################\")]),t._v(\"\\nserver \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\tlisten  80\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\tserver_name www.demo.com\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\troot   /usr/share/nginx/html/demo/\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\\tlocation / \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\t\\tindex index.html index.htm index.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\tautoindex off\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\\t\\t\"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"!\")]),t._v(\"-e \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$request_filename\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\t\\t\\trewrite  ^\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$  /index.php?s\"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"/\"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$1\")]),t._v(\"  last\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\t\\t\"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\t\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\t\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\\tlocation ~ \\\\.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$ \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\t\\troot   /var/www/html/demo/\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\tfastcgi_pass 172.17.0.2:9000\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\tfastcgi_index index.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\tfastcgi_split_path_info ^\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"((\")]),t._v(\"?U\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\".+\\\\.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"/?.+\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\tfastcgi_param SCRIPT_FILENAME \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_script_name\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\tfastcgi_param PATH_INFO \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\tfastcgi_param PATH_TRANSLATED \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\\tinclude  fastcgi_params\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\t\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################文件内容结束分割线###################################\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 注意上述文件两处root的配置！！！\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 因已指定宿主机的映射，这里 /usr/share/nginx/html 与 /var/www/html 目录实际就是宿主机的 /home/www \")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 但不可写为/home/www，否则会报File not found的错误，因为宿主机的配置是映射到容器目录的\")]),t._v(\"\\n\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"########################分割线###################################\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 配置https\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 建立https证书放置文件夹ssl\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"mkdir\")]),t._v(\" -p /home/nginx/conf.d/ssl\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 放置https证书至宿主机/home/nginx/conf.d/ssl目录下\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 配置虚拟机文件\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 以配置www.demo.com虚拟机为例,项目目录地址为/home/www/demo\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################文件内容开始分割线###################################\")]),t._v(\"\\nserver \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    listen 80\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    listen 443 ssl\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    server_name www.demo.com\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    root   /usr/share/nginx/html/demo/\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    ssl_certificate  /etc/nginx/conf.d/ssl/1_www.demo.com_bundle.crt\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    ssl_certificate_key  /etc/nginx/conf.d/ssl/2_www.demo.com.key\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    location / \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        index index.html index.htm index.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        autoindex off\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n        \"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"!\")]),t._v(\"-e \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$request_filename\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            rewrite  ^\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$  /index.php?s\"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"/\"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$1\")]),t._v(\"  last\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    location ~ \\\\.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$ \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        root   /var/www/html/demo/\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_pass 172.17.0.2:9000\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_index index.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_split_path_info ^\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"((\")]),t._v(\"?U\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\".+\\\\.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"/?.+\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param SCRIPT_FILENAME \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_script_name\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param PATH_INFO \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param PATH_TRANSLATED \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        include  fastcgi_params\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################文件内容结束分割线###################################\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 注意上述文件两处root的配置！！！\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 因已指定宿主机的映射，\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# /usr/share/nginx/html 与 /var/www/html 目录实际就是宿主机的 /home/www \")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# /etc/nginx/conf.d 目录实际就是宿主机的 /home/nginx/conf.d\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 配置http访问自动跳转至https\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################文件内容开始分割线###################################\")]),t._v(\"\\nserver \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    listen 80\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    server_name www.demo.com\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" 301 https://\"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$server_name\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$request_uri\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" \\n\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\nserver \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    listen 443\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    server_name www.demo.com\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    root   /usr/share/nginx/html/demo/\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    ssl on\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    ssl_certificate  /etc/nginx/conf.d/ssl/1_www.demo.com_bundle.crt\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    ssl_certificate_key  /etc/nginx/conf.d/ssl/2_www.demo.com.key\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n    location / \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        index index.html index.htm index.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        autoindex off\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n        \"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"!\")]),t._v(\"-e \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$request_filename\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            rewrite  ^\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$  /index.php?s\"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"/\"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$1\")]),t._v(\"  last\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n            \"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"break\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    location ~ \\\\.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\".*\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$ \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        root   /var/www/html/demo/\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_pass 172.17.0.2:9000\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_index index.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_split_path_info ^\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"((\")]),t._v(\"?U\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\".+\\\\.php\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"/?.+\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"$\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param SCRIPT_FILENAME \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_script_name\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param PATH_INFO \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        fastcgi_param PATH_TRANSLATED \"),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$document_root\")]),s(\"span\",{attrs:{class:\"token variable\"}},[t._v(\"$fastcgi_path_info\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        include  fastcgi_params\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################文件内容结束分割线###################################\")]),t._v(\"\\n\\n\")])])]),s(\"h2\",{attrs:{id:\"安装mysql\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装mysql\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 安装mysql\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[t._v(\"\\ndocker pull mysql:5.6\\n\\ndocker run -p 3306:3306 --name mysql -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/logs:/logs -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD\"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"123456 --rm -d mysql:5.6\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 如外网连不上数据库，执行以下处理：\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################开始分割线###################################\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 进入MySQL容器\")]),t._v(\"\\ndocker \"),s(\"span\",{attrs:{class:\"token function\"}},[t._v(\"exec\")]),t._v(\" -it mysql /bin/bash\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 进入MySQL\")]),t._v(\"\\nmysql -uroot -p\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 切换到mysql数据表\")]),t._v(\"\\nuse mysql\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 设置root帐号的密码\")]),t._v(\"\\nupdate user \"),s(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"set\")]),t._v(\" authentication_string \"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" password\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'123456'\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" where user \"),s(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'root'\")]),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# 对root进行授权\")]),t._v(\"\\nGRANT ALL PRIVILEGES ON *.* TO \"),s(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'root'\")]),t._v(\"@\"),s(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'%'\")]),t._v(\" IDENTIFIED BY \"),s(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'root'\")]),t._v(\" WITH GRANT OPTION\"),s(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),s(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"######################结束分割线###################################\")]),t._v(\"\\n\\n\")])])])])}],!1,null,null,null);o.options.__file=\"demo.md\";n.default=o.exports}}]);","extractedComments":[]}