{"remainingRequest":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/jianhaihao/Documents/Products/jianhaihao.github.io/docs/nginx/https.md?vue&type=template&id=4c14a6ed&","dependencies":[{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/docs/nginx/https.md","mtime":1538011052578},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1538011053294},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1538011056047},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1538011053294},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vue-loader/lib/index.js","mtime":1538011056047},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1538011056128}],"contextDependencies":[],"result":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm._m(0)\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"content\" }, [\n      _c(\"h1\", { attrs: { id: \"nginx-https服务\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#nginx-https服务\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" Nginx HTTPS服务\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"h2\", { attrs: { id: \"准备工作\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#准备工作\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" 准备工作\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"language-bash extra-class\" }, [\n        _c(\"pre\", { pre: true, attrs: { class: \"language-bash\" } }, [\n          _c(\"code\", [\n            _vm._v(\"openssl version\\nnginx -V\\nrpm -qa \"),\n            _c(\"span\", { attrs: { class: \"token operator\" } }, [_vm._v(\"|\")]),\n            _vm._v(\" \"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [\n              _vm._v(\"grep\")\n            ]),\n            _vm._v(\" openssl\\n\")\n          ])\n        ])\n      ]),\n      _c(\"h2\", { attrs: { id: \"生成-key-csr-crt\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#生成-key-csr-crt\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" 生成 key,csr,crt\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"language-bash extra-class\" }, [\n        _c(\"pre\", { pre: true, attrs: { class: \"language-bash\" } }, [\n          _c(\"code\", [\n            _vm._v(\n              \"openssl genrsa -idea -out hostname.key 1024\\nopenssl req -new -key hostname.key -out docs.csr\\nopenssl -req -days 3650 -in docs.csr -signkey docs.key -out docs.crt\\n\"\n            )\n          ])\n        ])\n      ]),\n      _c(\"h2\", { attrs: { id: \"去掉-key-的密码\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#去掉-key-的密码\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" 去掉 key 的密码\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"language-bash extra-class\" }, [\n        _c(\"pre\", { pre: true, attrs: { class: \"language-bash\" } }, [\n          _c(\"code\", [\n            _vm._v(\"openssl rsa -in ./hostname.key -out ./hostname_nopwd.key\\n\")\n          ])\n        ])\n      ]),\n      _c(\"h2\", { attrs: { id: \"直接通过-key-生成-crt\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#直接通过-key-生成-crt\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" 直接通过 key 生成 crt\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"language-bash extra-class\" }, [\n        _c(\"pre\", { pre: true, attrs: { class: \"language-bash\" } }, [\n          _c(\"code\", [\n            _vm._v(\n              \"openssl req -days 36500 -x509 -sha256 -nodes -newkey rsa:2048 -keyout hostname.key -out hostname.crt\\n\"\n            )\n          ])\n        ])\n      ]),\n      _c(\"h2\", { attrs: { id: \"nginx-的-https-的语法配置\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#nginx-的-https-的语法配置\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" Nginx 的 HTTPS 的语法配置\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"p\", [\n        _vm._v(\n          \"Syntax: ssl on | off;\\nDefault: ssl off;\\nContext: http, server\"\n        )\n      ]),\n      _vm._v(\" \"),\n      _c(\"p\", [\n        _vm._v(\n          \"Syntax: ssl_centificate file;\\nDefault: --;\\nContext: http, server\"\n        )\n      ]),\n      _vm._v(\" \"),\n      _c(\"p\", [\n        _vm._v(\n          \"Syntax: ssl_certificate_key file;\\nDefault: --;\\nContext: http, server\"\n        )\n      ]),\n      _vm._v(\" \"),\n      _c(\"h2\", { attrs: { id: \"苹果证书要求\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#苹果证书要求\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" 苹果证书要求\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"ul\", [\n        _c(\"li\", [\n          _vm._v(\"服务器所有的连接使用 TLS1.2 以上的版本 (openssl 1.0.2)\")\n        ]),\n        _vm._v(\" \"),\n        _c(\"li\", [_vm._v(\"HTTPS 证书必须使用 SHA256 以上哈希算法签名\")]),\n        _vm._v(\" \"),\n        _c(\"li\", [\n          _vm._v(\"HTTPS 证书必须使用 RSA 2048 位或 ECC 256 位以上的公钥算法\")\n        ]),\n        _vm._v(\" \"),\n        _c(\"li\", [_vm._v(\"使用前向加密技术\")])\n      ]),\n      _vm._v(\" \"),\n      _c(\"h2\", { attrs: { id: \"查看-crt-证书信息\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#查看-crt-证书信息\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" 查看 crt 证书信息\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"language-bash extra-class\" }, [\n        _c(\"pre\", { pre: true, attrs: { class: \"language-bash\" } }, [\n          _c(\"code\", [_vm._v(\"openssl x509 -noout -text -in ./hostname.crt\\n\")])\n        ])\n      ]),\n      _c(\"h2\", { attrs: { id: \"升级-openssl-脚本\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#升级-openssl-脚本\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" 升级 openssl 脚本\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"language-bash extra-class\" }, [\n        _c(\"pre\", { pre: true, attrs: { class: \"language-bash\" } }, [\n          _c(\"code\", [\n            _c(\"span\", { attrs: { class: \"token shebang important\" } }, [\n              _vm._v(\"#!/bin/sh\")\n            ]),\n            _vm._v(\"\\n\"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [_vm._v(\"cd\")]),\n            _vm._v(\" /opt/download\\n\"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [\n              _vm._v(\"wget\")\n            ]),\n            _vm._v(\" https://www.openssl.org/source/openssl-1.0.2k.tar.gz\\n\"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [_vm._v(\"tar\")]),\n            _vm._v(\" -zxvf open-ssl-1.0.2k.tar.gz\\n\"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [_vm._v(\"cd\")]),\n            _vm._v(\" openssl-1.0.2k\\n./confg --prefix\"),\n            _c(\"span\", { attrs: { class: \"token operator\" } }, [_vm._v(\"=\")]),\n            _vm._v(\"/usr/local/openssl\\n\"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [\n              _vm._v(\"make\")\n            ]),\n            _vm._v(\" \"),\n            _c(\"span\", { attrs: { class: \"token operator\" } }, [_vm._v(\"&&\")]),\n            _vm._v(\" \"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [\n              _vm._v(\"make\")\n            ]),\n            _vm._v(\" \"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [\n              _vm._v(\"install\")\n            ]),\n            _vm._v(\"\\n\"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [_vm._v(\"mv\")]),\n            _vm._v(\" /usr/bin/openssl  /usr/bin/openssl.OFF\\n\"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [_vm._v(\"ln\")]),\n            _vm._v(\" -s /usr/local/openssl/bin/openssl  /usr/bin/openssl\\n\"),\n            _c(\"span\", { attrs: { class: \"token function\" } }, [_vm._v(\"ln\")]),\n            _vm._v(\n              \" -s /usr/local/openssl/include/openssl  /usr/include/openssl\\n\"\n            ),\n            _c(\"span\", { attrs: { class: \"token keyword\" } }, [_vm._v(\"echo\")]),\n            _vm._v(\" \"),\n            _c(\"span\", { attrs: { class: \"token string\" } }, [\n              _vm._v('\"/usr/local/openssl/lib\"')\n            ]),\n            _vm._v(\" \"),\n            _c(\"span\", { attrs: { class: \"token operator\" } }, [_vm._v(\">>\")]),\n            _vm._v(\"/etc/ld.so.conf\\nldconfg -v\\nopenssl version -a\\n\")\n          ])\n        ])\n      ]),\n      _c(\"h2\", { attrs: { id: \"https-优化\" } }, [\n        _c(\n          \"a\",\n          {\n            staticClass: \"header-anchor\",\n            attrs: { href: \"#https-优化\", \"aria-hidden\": \"true\" }\n          },\n          [_vm._v(\"#\")]\n        ),\n        _vm._v(\" HTTPS 优化\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"p\", [_vm._v(\"https 连接建立 = tcp 握手 + ssl 握手\")]),\n      _vm._v(\" \"),\n      _c(\"ul\", [\n        _c(\"li\", [\n          _vm._v(\"激活 keepalive 长连接\"),\n          _c(\"code\", [_vm._v(\"keepalive_timeout 100;\")])\n        ]),\n        _vm._v(\" \"),\n        _c(\"li\", [\n          _vm._v(\"设置 ssl session 缓存\\n\"),\n          _c(\"ul\", [\n            _c(\"li\", [\n              _c(\"code\", [_vm._v(\"ssl_session_cache shared:SSL:10m;\")])\n            ]),\n            _vm._v(\" \"),\n            _c(\"li\", [_c(\"code\", [_vm._v(\"ssl_session_timeout 10m;\")])])\n          ])\n        ])\n      ])\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }"]}