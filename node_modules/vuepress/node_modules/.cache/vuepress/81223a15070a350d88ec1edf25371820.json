{"remainingRequest":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js??vue-loader-options!D:\\Products\\jianhaihao.github.io\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\index.js??ref--1-1!D:\\Products\\jianhaihao.github.io\\node_modules\\vuepress\\lib\\webpack\\markdownLoader.js??ref--1-2!D:\\Products\\jianhaihao.github.io\\docs\\swoole\\tcp-server.md?vue&type=template&id=304701b0&","dependencies":[{"path":"D:\\Products\\jianhaihao.github.io\\docs\\swoole\\tcp-server.md","mtime":1552483032825},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552483034552},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1552483045256},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552483034552},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\index.js","mtime":1552483045254},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vuepress\\lib\\webpack\\markdownLoader.js","mtime":1552483045520}],"contextDependencies":[],"result":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_vm._ssrNode(\"<h1 id=\\\"tcp服务器\\\"><a href=\\\"#tcp服务器\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> TCP服务器</h1> <h2 id=\\\"服务端\\\"><a href=\\\"#服务端\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> 服务端</h2> <div class=\\\"language-php extra-class\\\"><pre class=\\\"language-php\\\"><code>\\n<span class=\\\"token comment\\\">//创建Server对象，监听 127.0.0.1:9501端口</span>\\n<span class=\\\"token variable\\\">$serv</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">swoole_server</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token double-quoted-string string\\\">&quot;127.0.0.1&quot;</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9501</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token variable\\\">$serv</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">set</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token single-quoted-string string\\\">'work_num'</span>    <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">&gt;</span> <span class=\\\"token number\\\">8</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// worker进程数 cpu 1-4</span>\\n    <span class=\\\"token single-quoted-string string\\\">'max_request'</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">&gt;</span> <span class=\\\"token number\\\">10000</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">//监听连接进入事件</span>\\n<span class=\\\"token comment\\\">/**\\n * $fd 客户端连接的唯一标识\\n * $reactor_id 线程ID\\n */</span>\\n<span class=\\\"token variable\\\">$serv</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">on</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token single-quoted-string string\\\">'connect'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$serv</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token variable\\\">$fd</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token variable\\\">$reactor_id</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token double-quoted-string string\\\">&quot;Client: <span class=\\\"token interpolation\\\"><span class=\\\"token punctuation\\\">{</span><span class=\\\"token variable\\\">$reactor_id</span><span class=\\\"token punctuation\\\">}</span></span> - <span class=\\\"token interpolation\\\"><span class=\\\"token punctuation\\\">{</span><span class=\\\"token variable\\\">$fd</span><span class=\\\"token punctuation\\\">}</span></span> - Connect.\\\\n&quot;</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">//监听数据接收事件</span>\\n<span class=\\\"token variable\\\">$serv</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">on</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token single-quoted-string string\\\">'receive'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$serv</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token variable\\\">$fd</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token variable\\\">$reactor_id</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token variable\\\">$data</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token variable\\\">$serv</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$fd</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token double-quoted-string string\\\">&quot;Server: <span class=\\\"token interpolation\\\"><span class=\\\"token punctuation\\\">{</span><span class=\\\"token variable\\\">$reactor_id</span><span class=\\\"token punctuation\\\">}</span></span> - <span class=\\\"token interpolation\\\"><span class=\\\"token punctuation\\\">{</span><span class=\\\"token variable\\\">$fd</span><span class=\\\"token punctuation\\\">}</span></span> - &quot;</span> <span class=\\\"token punctuation\\\">.</span> <span class=\\\"token variable\\\">$data</span> <span class=\\\"token punctuation\\\">.</span> <span class=\\\"token double-quoted-string string\\\">&quot;\\\\n&quot;</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">//监听连接关闭事件</span>\\n<span class=\\\"token variable\\\">$serv</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">on</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token single-quoted-string string\\\">'close'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$serv</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token variable\\\">$fd</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token double-quoted-string string\\\">&quot;Client: Close.\\\\n&quot;</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">//启动服务器</span>\\n<span class=\\\"token variable\\\">$serv</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">start</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n</code></pre></div><h2 id=\\\"客户端\\\"><a href=\\\"#客户端\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> 客户端</h2> <div class=\\\"language-php extra-class\\\"><pre class=\\\"language-php\\\"><code>\\n<span class=\\\"token comment\\\">// 连接swoole tcp服务器</span>\\n\\n<span class=\\\"token variable\\\">$client</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">swoole_client</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token constant\\\">SWOOLE_SOCK_TCP</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">!</span><span class=\\\"token variable\\\">$client</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">connect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token double-quoted-string string\\\">&quot;127.0.0.1&quot;</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9501</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">echo</span> <span class=\\\"token double-quoted-string string\\\">&quot;连接失败&quot;</span><span class=\\\"token punctuation\\\">;</span>\\n    exit<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">// php cli常量</span>\\n<span class=\\\"token function\\\">fwrite</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token constant\\\">STDOUT</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token double-quoted-string string\\\">&quot;请输入消息：&quot;</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token variable\\\">$msg</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">trim</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">fgets</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token constant\\\">STDIN</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// 发送消息给 tcp server 服务器</span>\\n<span class=\\\"token variable\\\">$client</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">send</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token variable\\\">$msg</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// 接受来自server的数据</span>\\n<span class=\\\"token variable\\\">$result</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token variable\\\">$client</span><span class=\\\"token operator\\\">-</span><span class=\\\"token operator\\\">&gt;</span><span class=\\\"token function\\\">recv</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">echo</span> <span class=\\\"token variable\\\">$result</span><span class=\\\"token punctuation\\\">;</span>\\n\\n</code></pre></div><h2 id=\\\"命令测试\\\"><a href=\\\"#命令测试\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> 命令测试</h2> <div class=\\\"language-bash extra-class\\\"><pre class=\\\"language-bash\\\"><code>\\ntelnet 127.0.0.1 9501             <span class=\\\"token comment\\\"># 测试连接TCP服务器</span>\\n\\n</code></pre></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"]}