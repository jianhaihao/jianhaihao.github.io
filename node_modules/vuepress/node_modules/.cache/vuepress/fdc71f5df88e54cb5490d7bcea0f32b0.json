{"remainingRequest":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/jianhaihao/Documents/Products/jianhaihao.github.io/docs/node/commonjs.md?vue&type=template&id=0bcaff9f&","dependencies":[{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/docs/node/commonjs.md","mtime":1537408168000},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1537926131947},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1537926131947},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jianhaihao/Documents/Products/jianhaihao.github.io/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1533872387000}],"contextDependencies":[],"result":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('h1',{attrs:{\"id\":\"commonjs-规范\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#commonjs-规范\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" CommonJS 规范\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Node 应用的模块都采用 CommonJS 规范，每个文件是一个模块，每个模块都有自己的作用域，在作用域里面定义的变量，函数，类，都是私有的，外部不可访问\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"所有代码运行在模块作用域，不会污染全局作用域\")]),_vm._v(\" \"),_c('li',[_vm._v(\"模块可以被多次加载，只有在第一次被加载的时候才会运行，后面的加载直接读取缓存的结果\")]),_vm._v(\" \"),_c('li',[_vm._v(\"模块加载的顺序，按照代码中出现的顺序\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"模块代码会被 Node 封装在下面这个函数里面\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-javascript extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-javascript\"}},[_c('code',[_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"function\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"exports\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" require\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" module\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" __filename\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\",\")]),_vm._v(\" __dirname\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token comment\"}},[_vm._v(\"// 模块代码\")]),_vm._v(\"\\n\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n\")])])]),_c('h2',{attrs:{\"id\":\"module-变量\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#module-变量\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" module 变量\")]),_vm._v(\" \"),_c('p',[_vm._v(\"每个模块内部有一个 module 变量表示当前模块具有以下属性\")]),_vm._v(\" \"),_c('table',[_c('thead',[_c('tr',[_c('th',[_vm._v(\"attribute\")]),_vm._v(\" \"),_c('th',[_vm._v(\"desc\")])])]),_vm._v(\" \"),_c('tbody',[_c('tr',[_c('td',[_vm._v(\"module.id\")]),_vm._v(\" \"),_c('td',[_vm._v(\"模块的标识符，通常是绝对路径加上模块文件名\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"module.filename\")]),_vm._v(\" \"),_c('td',[_vm._v(\"模块的文件名\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"module.loaded\")]),_vm._v(\" \"),_c('td',[_vm._v(\"模块是否加载完成\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"module.parent\")]),_vm._v(\" \"),_c('td',[_vm._v(\"调用模块的模块\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"moduel.children\")]),_vm._v(\" \"),_c('td',[_vm._v(\"返回一个数组，表示该模块调用的其他模块\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"module.exports\")]),_vm._v(\" \"),_c('td',[_vm._v(\"模块对外输出的值\")])])])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"requrie-命令\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#requrie-命令\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" requrie 命令\")]),_vm._v(\" \"),_c('p',[_vm._v(\"require 用于加载模块\")]),_vm._v(\" \"),_c('p',[_vm._v(\"加载规则\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"如果以\"),_c('code',[_vm._v(\"/\")]),_vm._v(\"开头，表示加载一个绝对路径的模块文件\")]),_vm._v(\" \"),_c('li',[_vm._v(\"如果以\"),_c('code',[_vm._v(\"./\")]),_vm._v(\"开头，表示加载一个相对路径的模块文件\")]),_vm._v(\" \"),_c('li',[_vm._v(\"如果不以\"),_c('code',[_vm._v(\"./\")]),_vm._v(\"或者\"),_c('code',[_vm._v(\"/\")]),_vm._v(\"开头，表示加载一个默认提供的模块，或者位于各级\"),_c('code',[_vm._v(\"node_modules\")]),_vm._v(\"目录下面的模块\")]),_vm._v(\" \"),_c('li',[_vm._v(\"如果不以\"),_c('code',[_vm._v(\"./\")]),_vm._v(\"或者\"),_c('code',[_vm._v(\"/\")]),_vm._v(\"开头,而是一个路径，比如\"),_c('code',[_vm._v(\"bar/foo/abc.js\")]),_vm._v(\"，Node 会尝试照到\"),_c('code',[_vm._v(\"bar\")]),_vm._v(\"目录的路径，然后继续往下照\")]),_vm._v(\" \"),_c('li',[_vm._v(\"如果指定的模块文件没有找啊到，Node 会尝试为文件名添加\"),_c('code',[_vm._v(\".js\")]),_vm._v(\", \"),_c('code',[_vm._v(\".node\")]),_vm._v(\", \"),_c('code',[_vm._v(\".json\")]),_vm._v(\"后缀，\"),_c('code',[_vm._v(\".js\")]),_vm._v(\"会以 JavaScript 脚本文件解析，\"),_c('code',[_vm._v(\".json\")]),_vm._v(\"会以 Json 格式的文件解析，\"),_c('code',[_vm._v(\".node\")]),_vm._v(\"会以编译后的二进制文件解析\")]),_vm._v(\" \"),_c('li',[_vm._v(\"如果想得到\"),_c('code',[_vm._v(\"require\")]),_vm._v(\"命令加载的确切文件名，可以使用\"),_c('code',[_vm._v(\"require.resolve()\")]),_vm._v(\"方法\")])]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"目录的加载规则\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"通常我们会吧相关文件放在一个文件夹里面，便于组织，然后设置一个入口文件，让\"),_c('code',[_vm._v(\"require\")]),_vm._v(\"通过入口文件加载整个目录，Node 模块的入口文件为\"),_c('code',[_vm._v(\"package.json\")]),_vm._v(\"，入口文件通过\"),_c('code',[_vm._v(\"main\")]),_vm._v(\"属性指定\")]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"模块的缓存\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"Node 在第一次夹在模块时，会缓存该模块，以后加载直接读取该模块的\"),_c('code',[_vm._v(\"module.exports\")]),_vm._v(\"属性\")]),_vm._v(\" \"),_c('p',[_vm._v(\"所有的缓存模块保存在\"),_c('code',[_vm._v(\"require.cache\")]),_vm._v(\"中，可以通过下面的方式删除模块的缓存\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-javascript extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-javascript\"}},[_c('code',[_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"delete\")]),_vm._v(\" require\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"cache\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_c('span',{attrs:{\"class\":\"token string\"}},[_vm._v(\"'moduleName'\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\";\")]),_vm._v(\"\\n\\nObject\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"keys\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"require\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"cache\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_c('span',{attrs:{\"class\":\"token function\"}},[_vm._v(\"forEach\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"(\")]),_vm._v(\"key \"),_c('span',{attrs:{\"class\":\"token operator\"}},[_vm._v(\"=>\")]),_vm._v(\" \"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"{\")]),_vm._v(\"\\n  \"),_c('span',{attrs:{\"class\":\"token keyword\"}},[_vm._v(\"delete\")]),_vm._v(\" require\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\".\")]),_vm._v(\"cache\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"[\")]),_vm._v(\"key\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"]\")]),_vm._v(\"\\n\"),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\"}\")]),_c('span',{attrs:{\"class\":\"token punctuation\"}},[_vm._v(\")\")]),_vm._v(\"\\n\")])])]),_c('p',[_c('strong',[_vm._v(\"require.main\")])]),_vm._v(\" \"),_c('p',[_c('code',[_vm._v(\"require\")]),_vm._v(\"对象有一个\"),_c('code',[_vm._v(\"main\")]),_vm._v(\"属性，用来判断模块是直接执行还是被调用执行\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"直接执行\"),_c('code',[_vm._v(\"node module.js\")]),_vm._v(\" 返回模块本身\")]),_vm._v(\" \"),_c('li',[_vm._v(\"被调用执行\"),_c('code',[_vm._v(\"require('module.js')\")]),_vm._v(\" // 返回\"),_c('code',[_vm._v(\"false\")])])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"模块的加载机制\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#模块的加载机制\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 模块的加载机制\")]),_vm._v(\" \"),_c('p',[_vm._v(\"输入的值是被输出值的拷贝，一旦模块的值被输出，在模块内部去改变，不会影响已经被输出的值\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"filename-dirname\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#filename-dirname\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" __filename, __dirname\")]),_vm._v(\" \"),_c('p',[_c('code',[_vm._v(\"__filename\")]),_vm._v(\"文件的绝对路径加上文件名\")]),_vm._v(\" \"),_c('p',[_c('code',[_vm._v(\"__dirname\")]),_vm._v(\"文件的绝对路径，不包括文件名\")])])}]\n\nexport { render, staticRenderFns }"]}