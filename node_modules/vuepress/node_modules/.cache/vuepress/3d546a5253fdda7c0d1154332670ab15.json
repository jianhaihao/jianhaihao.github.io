{"remainingRequest":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\index.js??ref--1-1!D:\\Products\\jianhaihao.github.io\\node_modules\\vuepress\\lib\\webpack\\markdownLoader.js??ref--1-2!D:\\Products\\jianhaihao.github.io\\docs\\yii\\basic.md?vue&type=template&id=48911d56&","dependencies":[{"path":"D:\\Products\\jianhaihao.github.io\\docs\\yii\\basic.md","mtime":1552405060832},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552405062612},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1552405073713},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552405062612},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\index.js","mtime":1552405073709},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vuepress\\lib\\webpack\\markdownLoader.js","mtime":1552405074109}],"contextDependencies":[],"result":["\n<div class=\"content\"><h1 id=\"api常用知识\"><a class=\"header-anchor\" href=\"#api常用知识\" aria-hidden=\"true\">#</a> API常用知识</h1>\n<blockquote>\n<p>针对Yii2.0-basic系列</p>\n</blockquote>\n<p><a href=\"https://www.yiichina.com\" target=\"_blank\" rel=\"noopener noreferrer\">官网<OutboundLink/></a>  <a href=\"https://www.yiichina.com/doc/guide/2.0\" target=\"_blank\" rel=\"noopener noreferrer\">文档<OutboundLink/></a></p>\n<h2 id=\"中断响应\"><a class=\"header-anchor\" href=\"#中断响应\" aria-hidden=\"true\">#</a> 中断响应</h2>\n<!--beforebegin--><div class=\"language-php extra-class\"><!--afterbegin--><pre v-pre class=\"language-php\"><code>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Yii</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * 【error】校验未通过，抛出异常\n */</span>\n<span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createResponse</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$code</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$msg</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'code'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$code</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'msg'</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">=</span> <span class=\"token variable\">$msg</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$response</span>       <span class=\"token operator\">=</span> Yii<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token variable\">$app</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">response</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">data</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">data</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">die</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// 需强制中断执行</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"格式化报错信息-跨域访问\"><a class=\"header-anchor\" href=\"#格式化报错信息-跨域访问\" aria-hidden=\"true\">#</a> 格式化报错信息&amp;&amp;跨域访问</h2>\n<p>编辑：根目录/config/web.php</p>\n<!--beforebegin--><div class=\"language-php extra-class\"><!--afterbegin--><pre v-pre class=\"language-php\"><code>\n<span class=\"token single-quoted-string string\">'components'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'response'</span>     <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'class'</span>         <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'yii\\web\\Response'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'on beforeSend'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$event</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">sender</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">statusCode</span> <span class=\"token operator\">!==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token variable\">$exception</span>      <span class=\"token operator\">=</span> Yii<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token variable\">$app</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getErrorHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">exception</span><span class=\"token punctuation\">;</span>\n                <span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">data</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token single-quoted-string string\">'code'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'msg'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'内部服务器错误'</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'data'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'err'</span>  <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n                        <span class=\"token single-quoted-string string\">'info'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$exception</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token single-quoted-string string\">'file'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$exception</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token single-quoted-string string\">'line'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$exception</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// 跨域设置</span>\n            <span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">headers</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Access-Control-Allow-Origin'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">headers</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Access-Control-Allow-Headers'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'*'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token variable\">$response</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">format</span> <span class=\"token operator\">=</span> yii\\<span class=\"token package\">web<span class=\"token punctuation\">\\</span>Response</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">FORMAT_JSON</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"接受不到json请求数据\"><a class=\"header-anchor\" href=\"#接受不到json请求数据\" aria-hidden=\"true\">#</a> 接受不到json请求数据</h2>\n<p>编辑：根目录/config/web.php</p>\n<!--beforebegin--><div class=\"language-php extra-class\"><!--afterbegin--><pre v-pre class=\"language-php\"><code>\n<span class=\"token single-quoted-string string\">'components'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'request'</span>      <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// !!! insert a secret key in the following (if it is empty) - this is required by cookie validation</span>\n        <span class=\"token single-quoted-string string\">'cookieValidationKey'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'********************'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 设置接收json数据</span>\n        <span class=\"token single-quoted-string string\">'parsers'</span>             <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'application/json'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'yii\\web\\JsonParser'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"美化路由\"><a class=\"header-anchor\" href=\"#美化路由\" aria-hidden=\"true\">#</a> 美化路由</h2>\n<!--beforebegin--><div class=\"language-php extra-class\"><!--afterbegin--><pre v-pre class=\"language-php\"><code>\n<span class=\"token shell-comment comment\"># 路由重写</span>\n\n<span class=\"token shell-comment comment\">### Apache</span>\n\n添加文件：根目录<span class=\"token operator\">/</span>web<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>htaccess\n<span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>文件内容开始线<span class=\"token punctuation\">(</span>请勿复制该线<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>\nRewriteEngine on\n<span class=\"token shell-comment comment\"># 如果请求的是真实存在的文件或目录，直接访问</span>\nRewriteCond <span class=\"token operator\">%</span><span class=\"token punctuation\">{</span><span class=\"token constant\">REQUEST_FILENAME</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">!</span><span class=\"token operator\">-</span>f\nRewriteCond <span class=\"token operator\">%</span><span class=\"token punctuation\">{</span><span class=\"token constant\">REQUEST_FILENAME</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">!</span><span class=\"token operator\">-</span>d\n<span class=\"token shell-comment comment\"># 如果请求的不是真实文件或目录，分发请求至 index.php</span>\nRewriteRule <span class=\"token punctuation\">.</span> index<span class=\"token punctuation\">.</span>php\n<span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>文件内容结束线<span class=\"token punctuation\">(</span>请勿复制该线<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>\n\n<span class=\"token shell-comment comment\"># 编辑：根目录/config/web.php</span>\n\n<span class=\"token single-quoted-string string\">'components'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'urlManager'</span>   <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'enablePrettyUrl'</span>     <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// 启用美化URL</span>\n        <span class=\"token single-quoted-string string\">'showScriptName'</span>      <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 在URL路径中是否显示脚本入口文件</span>\n        <span class=\"token single-quoted-string string\">'enableStrictParsing'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 是否执行严格的url解析</span>\n        <span class=\"token single-quoted-string string\">'suffix'</span>              <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">''</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 路由后缀名</span>\n        <span class=\"token single-quoted-string string\">'rules'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'&lt;controller:\\w+>/&lt;action:\\w+>'</span><span class=\"token operator\">=</span><span class=\"token operator\">></span><span class=\"token single-quoted-string string\">'&lt;controller>/&lt;action>'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"添加模块\"><a class=\"header-anchor\" href=\"#添加模块\" aria-hidden=\"true\">#</a> 添加模块</h2>\n<p>编辑：根目录/config/web.php</p>\n<!--beforebegin--><div class=\"language-php extra-class\"><!--afterbegin--><pre v-pre class=\"language-php\"><code>\n<span class=\"token single-quoted-string string\">'components'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'urlManager'</span>   <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'enablePrettyUrl'</span>     <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'showScriptName'</span>      <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'enableStrictParsing'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'suffix'</span>              <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'rules'</span>               <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'v1/platform/&lt;controller>/&lt;action>'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'v1_platform/&lt;controller>/&lt;action>'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'v1/shop/&lt;controller>/&lt;action>'</span>     <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'v1_shop/&lt;controller>/&lt;action>'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token single-quoted-string string\">'v1/user/&lt;controller>/&lt;action>'</span>     <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'v1_user/&lt;controller>/&lt;action>'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token single-quoted-string string\">'modules'</span>    <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'v1_platform'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'class'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'app\\modules\\v1\\platform\\module'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'v1_shop'</span>     <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'class'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'app\\modules\\v1\\shop\\module'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'v1_user'</span>     <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'class'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'app\\modules\\v1\\user\\module'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n</code></pre>\n<!--beforeend--></div><!--afterend--></div>\n",null]}