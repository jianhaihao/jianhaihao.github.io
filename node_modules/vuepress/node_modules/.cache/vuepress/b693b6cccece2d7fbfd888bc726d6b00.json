{"remainingRequest":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js??vue-loader-options!D:\\Products\\jianhaihao.github.io\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\index.js??ref--1-1!D:\\Products\\jianhaihao.github.io\\node_modules\\vuepress\\lib\\webpack\\markdownLoader.js??ref--1-2!D:\\Products\\jianhaihao.github.io\\docs\\linux-up\\performance.md?vue&type=template&id=3c4a0500&","dependencies":[{"path":"D:\\Products\\jianhaihao.github.io\\docs\\linux-up\\performance.md","mtime":1555059115929},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552483034552},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1552483045256},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552483034552},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vue-loader\\lib\\index.js","mtime":1552483045254},{"path":"D:\\Products\\jianhaihao.github.io\\node_modules\\vuepress\\lib\\webpack\\markdownLoader.js","mtime":1552483045520}],"contextDependencies":[],"result":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('h1',{attrs:{\"id\":\"性能测试\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#性能测试\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 性能测试\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"性能指标\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#性能指标\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 性能指标\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"合理的平均响应时间\"),_c('br'),_vm._v(\"\\n2/5/10原则\")]),_vm._v(\" \"),_c('li',[_vm._v(\"系统资源类\"),_c('br'),_vm._v(\"\\nCPU：CPU的占用率\"),_c('br'),_vm._v(\"\\n内存：内存的占用率、换页数等\"),_c('br'),_vm._v(\"\\nI/O：读写的请求数、读写量等\"),_c('br'),_vm._v(\"\\n带宽：进站出站带宽暂用率\")])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"性能测试分类\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#性能测试分类\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 性能测试分类\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"负载测试（Load Test）\"),_c('br'),_vm._v(\"\\n为了验证系统设计符合\"),_c('code',[_vm._v(\"正常业务负载\")]),_vm._v(\"情况下系统性能表现的测试\")]),_vm._v(\" \"),_c('li',[_vm._v(\"压力测试（Stress Test）\"),_c('br'),_vm._v(\"\\n为了验证系统在\"),_c('code',[_vm._v(\"极端负载\")]),_vm._v(\"情况下的系统性能表现的测试\")])]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"性能测试工具\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#性能测试工具\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 性能测试工具\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"top\"),_c('br'),_vm._v(\"\\n监控每一个进程的资源占用\")]),_vm._v(\" \"),_c('li',[_vm._v(\"sysstat\\n统计系统的各种资源占用情况\")])]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"\\nyum list sysstat\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 如果未提示 Installed Packages，再执行以下命令\")]),_vm._v(\"\\nyum \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"install\")]),_vm._v(\" sysstat.x86_64\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 查询 crontab 配置 sysstat的信息\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"cat\")]),_vm._v(\" /etc/cron.d/sysstat\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 日志路径\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"cd\")]),_vm._v(\" /var/log/sa/\\n\\n\")])])]),_c('h3',{attrs:{\"id\":\"sysstat-常用命令\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#sysstat-常用命令\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" \"),_c('code',[_vm._v(\"sysstat\")]),_vm._v(\" 常用命令\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('code',[_vm._v(\"sar -q -f\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"CPU任务数、CPU的任务繁重程度\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"sar -q -f sa25\\n\")])])]),_c('ul',[_c('li',[_vm._v(\"runq-sz：等待执行的任务队列长度，越长阻塞越严重\")]),_vm._v(\" \"),_c('li',[_vm._v(\"plist-sz：队列中的任务总数\")]),_vm._v(\" \"),_c('li',[_vm._v(\"ldavg-1： 1分钟内系统负载描述\")]),_vm._v(\" \"),_c('li',[_vm._v(\"ldavg-5： 5分钟内系统负载描述\")]),_vm._v(\" \"),_c('li',[_vm._v(\"ldavg-15： 15分钟内系统负载描述\")]),_vm._v(\" \"),_c('li',[_vm._v(\"ldavg > CPU总数时表示CPU压力大\"),_c('br'),_vm._v(\"\\nldavg值 等于大于CPU核数时，说明CPU负载非常大了\")]),_vm._v(\" \"),_c('li',[_vm._v(\"ldavg值 是通过执行中的任务和等待执行的任务的个数的平均值得到的\")])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"2\"}},[_c('li',[_c('code',[_vm._v(\"sar -p -f\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"CPU占用百分比、CPU占用率\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"sar -p -f sa08\\n\")])])]),_c('ul',[_c('li',[_vm._v(\"%user：用户占用百分比\")]),_vm._v(\" \"),_c('li',[_vm._v(\"%system：系统占用百分比\")]),_vm._v(\" \"),_c('li',[_vm._v(\"%nice：改过优先级的进程CPU占用率\")]),_vm._v(\" \"),_c('li',[_vm._v(\"%iowait： 等待io占用百分比\")]),_vm._v(\" \"),_c('li',[_vm._v(\"%idle：空闲的CPU占比\")]),_vm._v(\" \"),_c('li',[_vm._v(\"%steal：管理程序为另一个虚拟进程提供服务而等待虚拟CPU的百分比\")])]),_vm._v(\" \"),_c('p',[_c('code',[_vm._v(\"%steal 等待CPU\")]),_vm._v(\" vs \"),_c('code',[_vm._v(\"%iowait 等待磁盘读写\")])]),_vm._v(\" \"),_c('blockquote',[_c('p',[_vm._v(\"PRI：进程优先权，代表这个进程可被执行的优先级，值越小优先级越高，越早被执行\"),_c('br'),_vm._v(\"\\nNI：进程Nice值，进程可被执行的优先级的修正数值\"),_c('br'),_vm._v(\"\\nPRI(new) = PRI(old) + nice\")])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"3\"}},[_c('li',[_c('code',[_vm._v(\"sar -r -f\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"内存：实际上内存占的百分比\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"sar -r -f sa25\\n\")])])]),_c('ul',[_c('li',[_vm._v(\"kbmemfree：空闲的内存\")]),_vm._v(\" \"),_c('li',[_vm._v(\"kbmemused：已经使用的内存\")]),_vm._v(\" \"),_c('li',[_vm._v(\"%memused： 内存使用率\")]),_vm._v(\" \"),_c('li',[_vm._v(\"kbbuffers：文件磁盘块缓存\")]),_vm._v(\" \"),_c('li',[_vm._v(\"kbcached：文件缓存\")]),_vm._v(\" \"),_c('li',[_vm._v(\"kbcommit：是为了保证程序的正常运行需要的内存数目\")]),_vm._v(\" \"),_c('li',[_vm._v(\"%commit：是为了保证程序的正常运行还需要的内存百分比\")])]),_vm._v(\" \"),_c('blockquote',[_c('p',[_vm._v(\"buffer/cached 是为了提高文件读取的性能的磁盘缓存\\nkbcached 是针对文件系统的，是文件的缓存\\nkbbuffers 是针对磁盘块的缓存\\n\"),_c('code',[_vm._v(\"%memused\")]),_vm._v(\" + \"),_c('code',[_vm._v(\"%commit\")]),_vm._v(\" > 100% ，则说明内存不够，会导致内存频繁的换页，需要去动用虚拟内存\")])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"4\"}},[_c('li',[_c('code',[_vm._v(\"sar -B -f\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"内存：换页频繁程度\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"sar -B -f sa25\\n\")])])]),_c('ul',[_c('li',[_vm._v(\"pgpgin/s：表示每秒从磁盘或SWAP置换到内存的字节数（KB）\")]),_vm._v(\" \"),_c('li',[_vm._v(\"pgpgout/s：表示每秒从内存置换到磁盘或SWAP的字节数（KB）\")]),_vm._v(\" \"),_c('li',[_vm._v(\"fault/s： 每秒钟系统产生的缺页数，即主缺页与轻微缺页之和（major + minor）\")]),_vm._v(\" \"),_c('li',[_vm._v(\"majflt/s：每秒钟产生的主缺页数，该值大于0时，代表肯定会发生换页\")])]),_vm._v(\" \"),_c('blockquote',[_c('p',[_vm._v(\"pgpgin/s && pgpgout/s 一旦发生，意味着就有磁盘的读写，io的性能就会受到很大的冲击\")])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"5\"}},[_c('li',[_c('code',[_vm._v(\"sar -W -f\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"内存：swap交换的频繁程度\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"sar -W -f sa25\\n\")])])]),_c('ul',[_c('li',[_vm._v(\"pswpin/s：表示每秒从SWAP置换到内存的字节数（KB）\")]),_vm._v(\" \"),_c('li',[_vm._v(\"pswpout/s：表示每秒从内存置换到SWAP的字节数（KB）\")])]),_vm._v(\" \"),_c('blockquote',[_c('p',[_vm._v(\"pswpin/s && pswpout/s 越大，意味着负载越重\")])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"6\"}},[_c('li',[_c('code',[_vm._v(\"sar -b -f\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"IO监控\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"sar -b -f sa25\\n\")])])]),_c('ul',[_c('li',[_vm._v(\"tps：每秒钟物理设备的 I/O 请求次数\")]),_vm._v(\" \"),_c('li',[_vm._v(\"rtps：每秒钟从物理设备读入的请求次数\")]),_vm._v(\" \"),_c('li',[_vm._v(\"wtps：每秒钟向物理设备写入的请求次数\")]),_vm._v(\" \"),_c('li',[_vm._v(\"bread/s：每秒钟从物理设备读入的数据量，单位为 块/s\")]),_vm._v(\" \"),_c('li',[_vm._v(\"bwrtn/s：每秒钟从物理设备写入的数据量，单位为 块/s\")])]),_vm._v(\" \"),_c('ol',{attrs:{\"start\":\"7\"}},[_c('li',[_c('code',[_vm._v(\"sar -d -f\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"IO监控\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"sar -d -f sa25\\n\")])])]),_c('ul',[_c('li',[_vm._v(\"tps：每秒钟物理设备的 I/O 请求次数\")]),_vm._v(\" \"),_c('li',[_vm._v(\"rd_sec/s：每秒读扇区的次数\")]),_vm._v(\" \"),_c('li',[_vm._v(\"wr_sec/s：每秒写扇区的次数\")]),_vm._v(\" \"),_c('li',[_vm._v(\"%util: I/O请求占CPU的百分比，比例越大，说明越饱和\")])]),_vm._v(\" \"),_c('h3',{attrs:{\"id\":\"评估磁盘读写性能极限\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#评估磁盘读写性能极限\",\"aria-hidden\":\"true\"}},[_vm._v(\"#\")]),_vm._v(\" 评估磁盘读写性能极限\")]),_vm._v(\" \"),_c('div',{staticClass:\"language-bash extra-class\"},[_c('pre',{pre:true,attrs:{\"class\":\"language-bash\"}},[_c('code',[_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 安装fio\")]),_vm._v(\"\\nyum list fio\\nyum \"),_c('span',{pre:true,attrs:{\"class\":\"token function\"}},[_vm._v(\"install\")]),_vm._v(\" fio.x86_64\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 执行 fio命令\")]),_vm._v(\"\\nfio -filename\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"/tmp/test -direct\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"1 -iodepth 1 -thread -rw\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"randrw -ioengine\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"psync -bs\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"16k -size\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"2G -numjobs\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"10 -runtime\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"30 -group_reporting -name\"),_c('span',{pre:true,attrs:{\"class\":\"token operator\"}},[_vm._v(\"=\")]),_vm._v(\"mytest13\\n\\n\"),_c('span',{pre:true,attrs:{\"class\":\"token comment\"}},[_vm._v(\"# 查看打印结果中的 iops 具体值\")]),_vm._v(\"\\n\\n\")])])])])}]\n\nexport { render, staticRenderFns }"]}